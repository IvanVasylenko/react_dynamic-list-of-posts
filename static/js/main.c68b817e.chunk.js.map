{"version":3,"sources":["api/api.js","api/posts.js","components/PostsList/PostsList.jsx","api/comments.js","components/NewCommentForm/NewCommentForm.jsx","components/Loader/Loader.jsx","components/PostDetails/PostDetails.jsx","App.jsx","api/users.js","index.js"],"names":["get","endpoint","options","fetch","then","response","json","result","data","getPosts","PostsList","posts","onSelectedPostId","selectedPostId","className","map","post","key","id","userId","title","type","onClick","createPostComment","postId","name","email","body","method","headers","JSON","stringify","deletePostComment","NewCommentForm","updateComents","useState","setName","setEmail","setBody","addNewComment","a","clearForm","onSubmit","event","preventDefault","placeholder","value","onChange","target","required","Loader","PostDetails","selectedPost","setSelectedPost","comments","setComments","showComments","setShowComments","useEffect","length","comment","App","setPosts","users","setUsers","setSelectedPostId","user","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.c68b817e.chunk.js","sourcesContent":["export const BASE_URL = 'https://mate-api.herokuapp.com';\n\nexport const get = (endpoint, options) => (\n  fetch(`${BASE_URL}/${endpoint}`, options)\n    .then(response => response.json())\n    .then(result => result.data)\n)\n\nexport const remove = (endpoint) => (\n  get(endpoint, { method: 'DELETE' })\n)\n\nexport const post = (endpoint, data) => (\n  get(endpoint, {\n    method: 'POST',\n    headers: {\n      'Content-type': 'application/json; charset=UTF-8',\n    },\n    body: JSON.stringify(data),\n  })\n)","import { get } from './api';\n\nexport const getPosts = () => get('posts');\nexport const getUserPosts = (userId) => get(`posts?userId=${userId}`);\nexport const getPostDetails = (postId) => get(`posts/${postId}`);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport './PostsList.scss';\n\nexport const PostsList = ({ posts, onSelectedPostId, selectedPostId }) => (\n  <div className=\"PostsList\">\n    <h2>Posts:</h2>\n\n    <ul className=\"PostsList__list\">\n      {posts.map(post => (\n        <li key={post.id} className=\"PostsList__item\">\n          <div>\n            <b>[User #{post.userId}]: </b>\n            {post.title}\n          </div>\n          <button\n            type=\"button\"\n            className=\"PostsList__button button\"\n            onClick={() => onSelectedPostId(post.id)}\n          >\n            {(selectedPostId !== post.id) \n              ? 'Open'\n              : 'Close'\n            }\n          </button>\n        </li>\n      ))}\n    </ul>\n  </div>\n);\n\nPostsList.propTypes = {\n  posts: PropTypes.arrayOf(PropTypes.object).isRequired,\n  onSelectedPostId: PropTypes.func.isRequired,\n  selectedPostId: PropTypes.number.isRequired,\n};\n","import { get, post, remove } from './api';\n\nexport const getPostComments = (endpoint) => get(`comments${endpoint}`);\nexport const createPostComment = (postId, name, email, body) => (\n  post('comments', {postId, name, email, body})\n);\nexport const deletePostComment = (id) => remove(`comments/${id}`);\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport './NewCommentForm.scss';\n\nimport { createPostComment } from '../../api/comments';\n\nexport const NewCommentForm = ({ postId, updateComents }) => {\n  const [name, setName] = useState('');\n  const [email, setEmail] = useState('');\n  const [body, setBody] = useState('');\n\n  const addNewComment = async () => {\n    await createPostComment( postId, name, email, body );\n    updateComents();\n    clearForm();\n  };\n\n  const clearForm = () => {\n    setName('');\n    setEmail('');\n    setBody('');\n  };\n\n  return (\n    <form\n      className=\"NewCommentForm\"\n      onSubmit={(event) => {\n        event.preventDefault();\n        addNewComment()\n      }}\n    >\n      <div className=\"form-field\">\n        <input\n          type=\"text\"\n          name=\"name\"\n          placeholder=\"Your name\"\n          className=\"NewCommentForm__input\"\n          value={name}\n          onChange={({ target }) => setName(target.value)}\n          required\n        />\n      </div>\n\n      <div className=\"form-field\">\n        <input\n          type=\"email\"\n          name=\"email\"\n          placeholder=\"Your email\"\n          className=\"NewCommentForm__input\"\n          value={email}\n          onChange={({ target }) => setEmail(target.value)}\n          required\n        />\n      </div>\n\n      <div className=\"form-field\">\n        <textarea\n          name=\"body\"\n          placeholder=\"Type comment here\"\n          className=\"NewCommentForm__input\"\n          value={body}\n          onChange={({ target }) => setBody(target.value)}\n          required\n        />\n      </div>\n\n      <button\n        type=\"submit\"\n        className=\"NewCommentForm__submit-button button\"\n      >\n        Add a comment\n      </button>\n    </form>\n  );\n};\n\nNewCommentForm.propTypes = {\n  postId: PropTypes.number.isRequired,\n  updateComents: PropTypes.func.isRequired,\n};\n","import React from 'react';\nimport './Loader.scss';\n\nexport const Loader = () => (\n  <div className=\"Loader\">\n    <div className=\"Loader__content\" />\n  </div>\n);\n","import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\n\nimport './PostDetails.scss';\n\nimport { getPostDetails } from '../../api/posts';\nimport { getPostComments, deletePostComment } from '../../api/comments';\n\nimport { NewCommentForm } from '../NewCommentForm';\nimport { Loader } from '../Loader/Loader';\n\nexport const PostDetails = ({ selectedPostId }) => {\n  const [selectedPost, setSelectedPost] = useState(null);\n  const [comments, setComments] = useState(null);\n  const [showComments, setShowComments] = useState(true);\n  \n  useEffect(() => {\n    getPostDetails(selectedPostId)\n      .then(result => setSelectedPost(result))\n\n    updateComents(selectedPostId)\n  }, [selectedPostId]);\n\n  const updateComents = (selectedPostId) => {\n    getPostComments(`?postId=${selectedPostId}`)\n      .then(result => setComments(result))\n  };\n\n  return (\n    <div className=\"PostDetails\">\n      <h2>Post details:</h2>\n\n      <section className=\"PostDetails__post\">\n        {selectedPost && selectedPost.body}\n      </section>\n\n      {comments ? (\n        <>\n          <section className=\"PostDetails__comments\">\n          {comments.length === 0\n            ? <p>No comments yet</p>\n            : (\n              <button\n                type=\"button\"\n                className=\"button\"\n                onClick={() => {\n                  setShowComments(() => !showComments);\n                }}\n              >\n                {showComments\n                  ? `Hide ${comments.length} comments`\n                  : `Show ${comments.length} comments`\n                }\n              </button>\n            )}\n            \n            {showComments && (\n              <ul className=\"PostDetails__list\">\n                {comments && comments.map(comment => (\n                  <li key={comment.id} className=\"PostDetails__list-item\">\n                    <button\n                      type=\"button\"\n                      className=\"PostDetails__remove-button button\"\n                      onClick={() => {\n                        deletePostComment(comment.id)\n                          .then(() => updateComents(selectedPostId))\n                        }}\n                    >\n                      X\n                    </button>\n                    <p>{comment.body}</p>\n                  </li>\n                ))}\n              </ul>\n            )}\n          </section>\n\n          <section>\n            <div className=\"PostDetails__form-wrapper\">\n              <NewCommentForm\n                postId={selectedPostId}\n                updateComents={() => updateComents(selectedPostId)}\n              />\n            </div>\n          </section>\n        </>\n      ) : (\n        <Loader />\n      )}\n    </div>\n  );\n};\n\nPostDetails.propTypes = {\n  selectedPostId: PropTypes.number.isRequired,\n};\n","import React, { useState, useEffect } from 'react';\n\nimport './App.scss';\nimport './styles/general.scss';\n\nimport { getPosts, getUserPosts } from './api/posts';\nimport { getUsers } from './api/users';\n\nimport { PostsList } from './components/PostsList';\nimport { PostDetails } from './components/PostDetails';\n\nconst App = () => {\n  const [posts, setPosts] = useState([]);\n  const [users, setUsers] = useState([]);\n  const [selectedPostId, setSelectedPostId] = useState(null);\n\n  useEffect(() => {\n    getPosts()\n      .then(setPosts);\n    getUsers()\n      .then(setUsers);\n  }, []);\n\n  const selectedUserPosts = ({ target }) => {\n    if (+target.value === 0) {\n      getPosts()\n        .then(data => setPosts(data));\n    }\n\n    getUserPosts(target.value)\n      .then(data => setPosts(data));\n  };\n\n  const onSelectedPostId = (postId) => {\n    if (postId === selectedPostId) {\n      setSelectedPostId(0);\n    } else {\n      setSelectedPostId(postId);\n    }\n  };  \n\n  return (    \n    <div className=\"App\">\n      <header className=\"App__header\">\n        <label>\n          Select a user: &nbsp;\n\n          <select\n            className=\"App__user-selector\"\n            onChange={selectedUserPosts}\n          >\n            <option value=\"0\">All users</option>\n            {users.map(user => (\n              <option key={user.id} value={user.id}>\n                {user.name}\n              </option>\n            ))}\n          </select>\n        </label>\n      </header>\n\n      <main className=\"App__main\">\n        <div className=\"App__sidebar\">\n          <PostsList\n            posts={posts}\n            selectedPostId={selectedPostId}\n            onSelectedPostId={onSelectedPostId}\n          />\n        </div>\n\n\n        {selectedPostId &&\n          <div className=\"App__content\">\n            <PostDetails selectedPostId={selectedPostId}/>\n          </div>\n        }\n      </main>\n    </div>\n  );\n};\n\nexport default App;\n","import { get } from './api';\n\nexport const getUsers = () => get('users');\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}